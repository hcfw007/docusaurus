---
title: Message
sidebar_label: 'Message'
---

# Message Mixin

## Abstract Methods

### conversationReadMark

```ts
abstract conversationReadMark (conversationId: string, hasRead?: boolean) : Promise<void | boolean>
```

Get or set the readmark condition of the contact. Readmark is the read dot in IM that marks new messages.

If the hasRead parameter is ```undefined```, the readmark status of the contact should be returned.

If the hasRead is a valid boolean, the readmark should be set as the hasRead parameter and ```void``` should be returned.

### messageContact

```ts
abstract messageContact (messageId: string): Promise<string>
```

Extract the contact id from a business card message.

### messageFile

```ts
abstract messageFile (messageId: string): Promise<FileBoxInterface>
```

Extract the file from a message with attachment, e.g. video, audio, image, etc.

### messageImage

```ts
abstract messageImage (messageId: string, imageType: ImageType): Promise<FileBoxInterface>
```

Extract the image from an image message.

### messageMiniProgram

```ts
abstract messageMiniProgram (messageId: string): Promise<MiniProgramPayload>
```

Extract the mini program from a mini program message.

### messageUrl

```ts
abstract messageUrl (messageId: string): Promise<UrlLinkPayload>
```

Extract the url link from a url link message.

### messageLocation

```ts
abstract messageLocation (messageId: string): Promise<LocationPayload>
```

Extract the location from a location message.

### messageForward

```ts
abstract messageForward (conversationId: string, messageId: string): Promise<void | string>
```

Forward a message to another conversation.

### messageSendContact

```ts
abstract messageSendContact (conversationId: string, contactId: string): Promise<void | string>
```

Send a business card message.

### messageSendFile

```ts
abstract messageSendFile (conversationId: string, file: FileBoxInterface): Promise<void | string>
```

Send a file message. All types of files should be sent with this method, including media message like video, audio and image.

### messageSendLocation

```ts
abstract messageSendLocation (conversationId: string, locationPayload: LocationPayload): Promise<void | string>
```

Send a location message.

### messageSendMiniProgram

```ts
abstract messageSendMiniProgram (conversationId: string, miniProgramPayload: MiniProgramPayload): Promise<void | string>
```

Send a mini program message.

### messageSendPost

```ts
abstract messageSendPost (conversationId: string, postPayload: PostPayload): Promise<void | string>
```

Send a post message. Usually post messages are quote messages or mixed messages (message with many sayables).

### messageSendText

```ts
abstract messageSendText (conversationId: string, text: string, mentionIdList?: string[]): Promise<void | string>
```

Send a text message. If the conversation is a room and ```mentionIdList``` is valid contact id list, that means the message should be sent while mentioning those contacts.

### messageSendUrl

```ts
abstract messageSendUrl (conversationId: string, urlLinkPayload: UrlLinkPayload): Promise<void | string>
```

Send a url link message.

### messageRecall

```ts
abstract messageRecall (messageId: string): Promise<boolean>
```

Recall a message.

### messagePayload

```ts
abstract messageRawPayload (messageId: string): Promise<any>
abstract messageRawPayloadParser (rawPayload: any) : Promise<MessagePayload>
```

```messageRawPayload``` returns the raw payload of the message generated by IM, and ```messageRawPayloadParser``` parse the raw payload and transfer it into wechaty payload.
